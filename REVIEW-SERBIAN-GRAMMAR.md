# Ревью: разделы грамматики сербского языка

## Общая архитектура

Грамматика сербского языка хранится в `data/serbian.json` как массив объектов `{title, content}` на каждом уровне. Контент — сырой HTML, который рендерится в аккордеон (`app/main.js:557-581`). Каждый топик — отдельная раскрывающаяся секция.

**Три уровня:**
- **Beginner** — 7 тем (глаголы бити/имати, числительные, вопросы, спряжение, направления, расположение)
- **Intermediate** — 26 тем (7 падежей + сводная таблица, 9 тем по футуру I, 9 тем по перфекту)
- **Advanced** — 6 тем (кондиционал, пасив, глагольный вид, плюсквамперфект, императив, сложные предложения)

---

## Сильные стороны

### 1. Продуманная методическая структура
Уровни выстроены логично: от базовых глаголов (beginner) через падежную систему и времена (intermediate) к сложным конструкциям (advanced). Падежная система — ядро сербской грамматики — получила наибольшее внимание (8 тем из 26 на intermediate).

### 2. Таблицы спряжений и склонений
Почти все темы содержат HTML-таблицы (`<table>`) с парадигмами. Beginner: 6 из 7 тем с таблицами. Intermediate: 17 из 26. Для языка с богатой морфологией это существенно.

### 3. Единообразие HTML-разметки
Используется устойчивый набор CSS-классов: `div.examples`, `div.example`, `div.target-lang`, `div.translation`, `div.note`. Стили для них определены в `app/style.css:1007-1026` — зелёный фон для примеров, жёлтый для заметок, чёткая типографика.

### 4. Сводная таблица падежей
Тема `intermediate[7]` ("Обобщающая таблица падежей") — 4456 символов, три полных парадигмы склонения (м.р., ж.р., ср.р.) с двойным написанием (кириллица/латиница). Это ценный справочный материал.

### 5. Двойная письменность в ключевых таблицах
В сводной таблице падежей и в ряде тем по футуру I/перфекту присутствует дублирование кириллица/латиница (например, `град / grad`, `жена / žena`). Для сербского, где обе письменности активно используются, это правильный подход.

---

## Проблемы и замечания

### Критичные

#### P1. Непоследовательное использование двойной письменности
Все 7 тем **beginner** и все 6 тем **advanced** не содержат латиницы вообще (0 пар "кириллица / latinica"). На intermediate ситуация смешанная: у 9 из 26 тем нет латиницы, а у остальных она присутствует фрагментарно.

| Уровень | Тем с латиницей | Тем без латиницы |
|---------|-----------------|------------------|
| Beginner | 0 / 7 | 7 / 7 |
| Intermediate | 17 / 26 | 9 / 26 |
| Advanced | 0 / 6 | 6 / 6 |

Для начинающих отсутствие латиницы особенно критично: в реальной Сербии вывески, меню и документы часто на латинице. Тем более что в словаре (vocabulary) проект уже последовательно использует формат `кириллица / latinica`.

#### P2. Advanced-уровень резко отличается по формату от остальных
Все 6 тем advanced не используют `div.examples` / `div.example` / `div.translation` — вместо этого примеры даны через `<ul><li>` с инлайновым форматированием (`<strong>`, `<em>`). Это создаёт визуальное несоответствие: на beginner/intermediate примеры выделены зелёным блоком, на advanced — обычный список.

Сравнение:
- **Beginner/Intermediate:** `<div class="examples"><div class="example"><div class="target-lang">...</div><div class="translation">...</div></div></div>`
- **Advanced:** `<ul><li><strong>слово</strong> — перевод</li></ul>`

#### P3. Контент intermediate перегружен мелкими темами
26 тем на одном аккордеоне — слишком много. При этом темы неравномерны по объёму: "Вопросительная форма футура I" — 324 символа, а "Примеры спряжения разных глаголов" — 4446 символов. Некоторые микротемы ("Порядок слов в футуре I" — 394 символа, "Образование футура I" — 468 символов) логичнее было бы объединить в одну развёрнутую тему.

### Существенные

#### P4. Непоследовательная нумерация заголовков
Первые 7 тем intermediate (падежи) имеют числовые префиксы в title: `"1. Номинатив..."`, `"2. Генитив..."`. Остальные 19 тем (футур I, перфект) — без нумерации. Сводная таблица падежей (topic[7]) тоже без номера. Нумерация либо должна быть у всех тем, либо ни у одной — аккордеон и так располагает элементы в порядке.

#### P5. Нет группировки тем внутри уровня
На intermediate 26 тем идут единым плоским списком: падежи → футур I → перфект. Нет визуального разделения на блоки ("Падежи", "Будущее время", "Прошедшее время"). Для навигации по 26 элементам пользователь вынужден скроллить и читать каждый заголовок.

#### P6. Нет примеров с `div.examples` на advanced
Ни одна из 6 тем advanced не использует стилизованный блок примеров. Примеры есть, но оформлены списками `<ul>`. Пользователь привыкает к формату на beginner/intermediate и теряет визуальные якоря на advanced.

#### P7. Тема "Числительные" (beginner[2]) — самая бедная
863 символа, нет таблицы, нет стилизованных примеров. Только `div.number-grid` с числами 1-10. Не хватает: чисел 11-20, десятков, порядковых числительных, примеров употребления с существительными (что важно, т.к. в сербском числительные влияют на падеж существительного: 2-4 — генитив ед.ч., 5+ — генитив мн.ч.).

### Мелкие

#### P8. CSS-ограничение `max-height: 5000px`
В `style.css:979` раскрытый аккордеон имеет `max-height: 5000px`. Для тем с большими таблицами (сводная таблица падежей — 4456 символов HTML, что рендерится в длинную страницу) это может быть недостаточно на мобильных устройствах при крупном шрифте. Лучше использовать `max-height: none` с JavaScript-анимацией или `100vh` -> `fit-content`.

#### P9. Аккордеон закрывает предыдущую тему при открытии новой
`initAccordion()` (`main.js:1340-1356`) реализует exclusive-mode: открытие одной темы закрывает все остальные. Для справочного раздела грамматики это ограничение — пользователь не может одновременно сравнить, например, образование утвердительной и отрицательной формы из разных тем.

#### P10. `topic.content` вставляется без санитизации
В `main.js:573` контент вставляется как `${topic.content}` без escapeHTML. Поскольку данные загружаются из локального JSON — прямой XSS-вектор отсутствует, но при подключении пользовательского контента или внешнего API это станет уязвимостью.

#### P11. Нет интерактивных мини-упражнений в грамматике
Грамматические темы — чисто текст + таблицы. В `PLAN.md` (задача 3.4) уже запланировано добавление поля `exercises` к каждой теме, но пока реализации нет. Принцип "прочитал правило → сразу отработал" — ключевой для усвоения, его отсутствие снижает эффективность.

---

## Рекомендации (в порядке приоритета)

1. **Добавить латиницу** во все грамматические темы beginner и advanced. Формат: `кириллица / latinica` в таблицах и примерах, аналогично тому, как это уже сделано в сводной таблице падежей.

2. **Привести advanced к единому формату** — заменить `<ul><li>` на `<div class="examples">` с `target-lang` / `translation`, как на предыдущих уровнях.

3. **Группировать темы intermediate** — добавить разделители или подзаголовки: "Падежная система", "Футур I", "Перфект". Можно реализовать как вложенный аккордеон или секции с заголовками между группами тем.

4. **Объединить микротемы** по футуру I и перфекту. Например: "Образование и формы футура I" (объединить topics 8-11), "Отрицание и вопросы в футуре I" (topics 12-13), "Употребление и порядок слов" (topics 14-16).

5. **Убрать числовые префиксы** из заголовков падежных тем или добавить номера ко всем темам уровня.

6. **Расширить тему "Числительные"** — добавить числа 11-100, порядковые числительные, правила согласования с существительными.

7. **Реализовать мини-упражнения** внутри грамматических тем (задача 3.4 из PLAN.md) — это значительно повысит усвоение материала.

---

## Статистика контента

| Метрика | Beginner | Intermediate | Advanced |
|---------|----------|-------------|----------|
| Грамматических тем | 7 | 26 | 6 |
| Средний объём темы | 3088 сим. | 1724 сим. | 1326 сим. |
| Тем с таблицами | 6 (86%) | 17 (65%) | 5 (83%) |
| Тем с div.examples | 6 (86%) | 24 (92%) | 0 (0%) |
| Тем с латиницей | 0 (0%) | 17 (65%) | 0 (0%) |
| Мин. объём темы | 863 | 324 | 1002 |
| Макс. объём темы | 5701 | 4456 | 1786 |
